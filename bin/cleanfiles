#! /bin/csh -f
#
# This shell script deletes unnecessary files under a design directory.
# "@(#) cleanfiles version 1.2 7/30/91"
#
if $1 != "" then
    set design = $1
else 
    echo "syntax: cleanfiles designName"
    echo ""
    exit
endif

onintr problem

if(!(-e ${design}.cel ) ) then
    echo " "
    echo "ERROR[cleanfiles]:${design}.cel not found."
    echo "Aborting cleanup."
    echo " "
    exit(1) ;
endif

# mv the stuff we dont want to delete
mv ${design}.cel /tmp/${design}.cel
# order here is important save the last used parameter file.
if( -e ${design}.par.sav ) then
    mv ${design}.par.sav /tmp/${design}.par.sav
endif
if( -e ${design}.par ) then
    mv ${design}.par /tmp/${design}.par.sav
endif

# these are the optional files 
if( -e ${design}.net ) then
    mv ${design}.net /tmp/${design}.net
endif
if( -e ${design}.mnet ) then
    mv ${design}.mnet /tmp/${design}.mnet
endif
if( -e ${design}_io.mnet ) then
    mv ${design}_io.mnet /tmp/${design}_io.mnet
endif

# remove everything
/bin/rm -f *
# /bin/rm -f ./DATA/*

problem: 
echo "Putting data back"

mv /tmp/${design}.cel ${design}.cel 
mv /tmp/${design}.par.sav ${design}.par.sav 

# move the optional files back
if( -e /tmp/${design}.net ) then 
    mv /tmp/${design}.net ${design}.net 
endif
if( -e /tmp/${design}.mnet ) then 
    mv /tmp/${design}.mnet ${design}.mnet 
endif
if( -e /tmp/${design}_io.mnet ) then 
    mv /tmp/${design}_io.mnet ${design}_io.mnet 
endif

exit
